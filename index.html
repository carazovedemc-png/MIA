<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>NeoChat — DeepSeek AI Terminal</title>
  <link rel="stylesheet" href="./style.css" />
  <!-- Telegram Web Apps SDK (будет доступен внутри Telegram) -->
  <script async src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body data-theme="dark">
  <div id="app" class="app-container" role="application" aria-label="NeoChat AI Terminal">
    <!-- Sidebar -->
    <aside class="sidebar" id="sidebar" aria-hidden="false">
      <div class="sidebar-top">
        <div class="logo" title="NeoChat">
          <svg class="logo-icon" viewBox="0 0 24 24" aria-hidden="true"><path d="M3 3h18v12H3z"></path></svg>
          <span class="logo-text">NeoChat</span>
        </div>
        <div class="api-status" id="apiStatus">
          <span class="status-dot" id="statusDot"></span>
          <span id="statusText">Disconnected</span>
        </div>
      </div>

      <nav class="conversations" aria-label="Список диалогов" id="conversationList">
        <!-- sample items for UI -->
      </nav>

      <div class="sidebar-actions">
        <button id="btnOpenSettings" class="btn">Настройки</button>
        <button id="btnClearHistory" class="btn danger">Очистить историю</button>
      </div>
    </aside>

    <!-- Main content -->
    <main class="main-content" id="mainContent">
      <header class="chat-header">
        <div class="header-left">
          <h1 id="chatTitle">DeepSeek AI</h1>
          <small id="appVersion">v1.0</small>
        </div>
        <div class="header-actions">
          <button id="btnThemeToggle" class="icon-btn" aria-label="Переключить тему">Тема</button>
          <button id="btnSettings" class="icon-btn" aria-label="Открыть настройки">⚙️</button>
        </div>
      </header>

      <section class="chat-view" id="chatView" aria-live="polite">
        <div id="messages" class="messages" role="log" aria-relevant="additions"></div>
      </section>

      <section class="input-area" aria-label="Поле ввода">
        <div class="quick-buttons" id="quickButtons" role="toolbar" aria-label="Быстрые кнопки">
          <button class="quick-btn" data-mode="code">Код</button>
          <button class="quick-btn" data-mode="explain">Объясни</button>
          <button class="quick-btn" data-mode="translate">Переведи</button>
        </div>

        <div class="input-row">
          <textarea id="inputField" class="input-field" rows="1" placeholder="Напишите сообщение..." aria-label="Сообщение"></textarea>
          <button id="sendBtn" class="btn primary" aria-label="Отправить">Отправить</button>
        </div>

        <!-- Virtual keyboard -->
        <div id="virtualKeyboard" class="virtual-keyboard" aria-hidden="false" role="application">
          <!-- rows added by JS -->
        </div>
      </section>
    </main>
  </div>

  <!-- Settings modal -->
  <div id="settingsModal" class="modal" aria-hidden="true" role="dialog" aria-modal="true" aria-labelledby="settingsTitle">
    <div class="modal-card">
      <header class="modal-header">
        <h2 id="settingsTitle">Настройки</h2>
        <button class="modal-close" id="closeSettings" aria-label="Закрыть">✕</button>
      </header>

      <section class="modal-body">
        <label class="field">
          <span>DeepSeek API Key</span>
          <input id="apiKeyInput" type="password" placeholder="sk-..." aria-label="API ключ DeepSeek" />
        </label>

        <div class="field">
          <button id="testApiBtn" class="btn">Проверить ключ</button>
          <span id="testApiResult" class="muted"></span>
        </div>

        <div class="field">
          <span>Тема оформления</span>
          <div class="theme-options">
            <button class="theme-btn" data-theme="dark">Тёмная</button>
            <button class="theme-btn" data-theme="light">Светлая</button>
            <button class="theme-btn" data-theme="blue">Синяя</button>
          </div>
        </div>

        <div class="field">
          <label><input id="toggleKeyboardSound" type="checkbox" /> Звук клавиатуры</label>
        </div>
      </section>

      <footer class="modal-footer">
        <button id="saveSettings" class="btn primary">Сохранить</button>
      </footer>
    </div>
  </div>

  <template id="messageTemplate">
    <div class="message">
      <div class="avatar"></div>
      <div class="bubble">
        <div class="meta"></div>
        <div class="text"></div>
      </div>
    </div>
  </template>

  <script src="./app.js"></script>
</body>
</html>